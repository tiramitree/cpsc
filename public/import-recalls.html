<!-- import-recalls.html -->
<!-- 
  Admin Recall Import Page with RiskLevel and PriorityLevel support.
  Submits recall details to /api/import.
-->

<!DOCTYPE html>
<html data-bs-theme="light" lang="en">
<head>
  <meta charset="utf-8">
  <title>Import Recalls - CPSC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
</head>
<body>

<nav class="navbar navbar-expand-md navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand" href="index.html">CPSC Recall Management</a>
  </div>
</nav>

<div class="container mt-5">
  <h2 class="text-center mb-4">Import Recall (Manual Entry)</h2>
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <form action="/api/import" method="post" id="importForm">
        <!-- Basic recall fields -->
        <div class="mb-3">
          <label for="RecallID" class="form-label">Recall ID *</label>
          <input type="text" class="form-control" id="RecallID" name="RecallID" required>
        </div>
        <div class="mb-3">
          <label for="RecallNumber" class="form-label">Recall Number</label>
          <input type="text" class="form-control" id="RecallNumber" name="RecallNumber">
        </div>
        <div class="mb-3">
          <label for="RecallDate" class="form-label">Recall Date *</label>
          <input type="date" class="form-control" id="RecallDate" name="RecallDate" required>
        </div>
        <div class="mb-3">
          <label for="Description" class="form-label">Description</label>
          <textarea class="form-control" id="Description" name="Description" rows="3"></textarea>
        </div>
        <div class="mb-3">
          <label for="URL" class="form-label">URL</label>
          <input type="url" class="form-control" id="URL" name="URL">
        </div>
        <div class="mb-3">
          <label for="Title" class="form-label">Title</label>
          <input type="text" class="form-control" id="Title" name="Title">
        </div>
        <div class="mb-3">
          <label for="ConsumerContact" class="form-label">Consumer Contact</label>
          <input type="text" class="form-control" id="ConsumerContact" name="ConsumerContact">
        </div>
        <div class="mb-3">
          <label for="LastPublishDate" class="form-label">Last Publish Date</label>
          <input type="date" class="form-control" id="LastPublishDate" name="LastPublishDate">
        </div>
        <div class="mb-3">
          <label for="Name" class="form-label">Product Name</label>
          <input type="text" class="form-control" id="Name" name="Name">
        </div>
        <div class="mb-3">
          <label for="Model" class="form-label">Model</label>
          <input type="text" class="form-control" id="Model" name="Model">
        </div>
        <div class="mb-3">
          <label for="Type" class="form-label">Type</label>
          <input type="text" class="form-control" id="Type" name="Type">
        </div>
        <div class="mb-3">
          <label for="CategoryID" class="form-label">Category ID</label>
          <input type="text" class="form-control" id="CategoryID" name="CategoryID">
        </div>
        <div class="mb-3">
          <label for="NumberOfUnits" class="form-label">Number Of Units</label>
          <input type="number" min="0" class="form-control" id="NumberOfUnits" name="NumberOfUnits">
        </div>

        <!-- New: Risk Level Dropdown -->
        <div class="mb-3">
          <label for="RiskLevel" class="form-label">Risk Level *</label>
          <select class="form-select" id="RiskLevel" name="RiskLevel" required>
            <option value="">Select Risk Level</option>
            <option value="High">High</option>
            <option value="Medium">Medium</option>
            <option value="Low">Low</option>
          </select>
        </div>

        <!-- New: Priority Level Dropdown -->
        <div class="mb-3">
          <label for="PriorityLevel" class="form-label">Priority Level *</label>
          <select class="form-select" id="PriorityLevel" name="PriorityLevel" required>
            <option value="">Select Priority</option>
            <option value="High">High</option>
            <option value="Low">Low</option>
          </select>
        </div>

        <button type="submit" class="btn btn-primary w-100">Submit Recall</button>
      </form>
    </div>
  </div>
</div>

<script src="assets/bootstrap/js/bootstrap.min.js"></script>
<script src="bold-and-bright.js"></script>

<script>
  // Frontend check: Prevent future dates
  document.getElementById('importForm').addEventListener('submit', (e) => {
    const dateVal = document.getElementById('RecallDate').value;
    const chosenDate = new Date(dateVal);
    const now = new Date();
    if (chosenDate > now) {
      e.preventDefault();
      alert("Recall date cannot be in the future!");
    }
  });
</script>
</body>
</html>
